<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formation Javascript Ecmascript</title>
    <link rel="stylesheet" href="../css/bootstrap.css" />
    <script src="../js/bootstrap.bundle.js"></script>
    <script src="../js/utils.js"></script>
    <script>
        loaded(function () {
            console.log(document);
            let mainArticle = qS('body > main > section article');
            console.log(mainArticle);
            console.log(mainArticle.baseURI);
            console.log(mainArticle.childNodes);
            //console.log(mainArticle.parentNode.parentNode.parentNode.childNodes);
            /*
            let test = mainArticle.parentNode.parentNode.parentNode.childNodes;
            test.forEach(element => {
                console.log(element.nodeName);
                if(element.nodeName === 'SECTION'){
                    //console.log(element.innerHTML);
                }
            });
            */
            let headingTitles = qSAll('.titreDeChapitre');
            console.log(headingTitles);
            let test = document.getElementsByClassName('titreDeChapitre');
            //console.log(test);
            let ouEstLeCLic = qS('#ouEstLeCLic');
            window.addEventListener('click', function(clickPage){
                //console.log(clickPage.pageX, clickPage.pageY);
                ouEstLeCLic.innerHTML = `
<b>X : ${clickPage.pageX} Y : ${clickPage.pageY} </b>
                `;
            });

            headingTitles.forEach(function(title, key, tab){
                title.addEventListener('click', function(){
                    console.log(`
this.innerText      : ${this.innerText}
key                 : ${key}
tab                 : ${tab}
this.nodename       : ${this.nodeName}
                    `);
                });
            });

            let allP = qSAll('p:not(#special)');
            console.log(allP);
            allP.forEach( paragraphe =>{
                paragraphe.addEventListener('click', function(){
                    qS('#showP').innerText = this.innerHTML;
                });
            });

            let imgPip = qS('#imgOver');

            imgOver.addEventListener('mouseenter', function(){
                this.setAttribute('src', '../images/pip-boy-thumb-up.png');
                this.setAttribute('alt', 'pip boy avec le pouce en l\'air');
                this.parentNode.childNodes.forEach(figureChild=>{
                    if('FIGCAPTION' === figureChild.nodeName){
                        figureChild.innerHTML = 'pip boy avec le pouce en l\'air';
                    }
                });
            });
            imgOver.addEventListener('mouseleave', function(){
                this.setAttribute('src', '../images/pip-boy-thumb-down.png');
                this.setAttribute('alt', 'pip boy avec le pouce en moins');
                this.parentNode.childNodes.forEach(figureChild=>{
                    if('FIGCAPTION' === figureChild.nodeName){
                        figureChild.innerHTML = 'pip boy avec le pouce en moins';
                    }
                });
            });

            qS('#checkP').addEventListener('click', function(event){
                event.stopPropagation();
            });

        });
    </script>
</head>

<body>
    <nav class="navbar navbar-expand-sm navbar-light bg-light">
        <div class="container">
            <a class="navbar-brand" href="../">Accueil</a>
            <button class="navbar-toggler d-lg-none" type="button" data-bs-toggle="collapse"
                data-bs-target="#collapsibleNavId" aria-controls="collapsibleNavId" aria-expanded="false"
                aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="collapsibleNavId">
                <ul class="navbar-nav me-auto mt-2 mt-lg-0">
                    <div class="collapse navbar-collapse" id="collapsibleNavId">
                        <ul class="navbar-nav me-auto mt-2 mt-lg-0">
                            <li class="nav-item dropdown">
                                <a class="nav-link dropdown-toggle" href="#" id="dropdownId" data-bs-toggle="dropdown"
                                    aria-haspopup="true" aria-expanded="false">Introduction</a>
                                <div class="dropdown-menu" aria-labelledby="dropdownId">
                                    <a class="dropdown-item" href="../introduction/index.html">Premiers scripts</a>
                                    <a class="dropdown-item" href="../introduction/tableaux.html">Les tableaux</a>
                                    <a class="dropdown-item" href="../introduction/fonctions.html">Les fonctions</a>
                                    <a class="dropdown-item" href="../introduction/destructuration.html">La
                                        destructuration</a>
                                    <a class="dropdown-item" href="../introduction/storage.html">Storage</a>
                                </div>
                            </li>
                        </ul>
                    </div>
                    <div class="collapse navbar-collapse" id="collapsibleNavId">
                        <ul class="navbar-nav me-auto mt-2 mt-lg-0">
                            <li class="nav-item dropdown">
                                <a class="nav-link dropdown-toggle" href="#" id="dropdownId" data-bs-toggle="dropdown"
                                    aria-haspopup="true" aria-expanded="false">Le DOM</a>
                                <div class="dropdown-menu" aria-labelledby="dropdownId">
                                    <a class="dropdown-item" href="../dom/index.html">Le DOM</a>
                                    <a class="dropdown-item" href="../dom/dom.html">Créer dans le DOM</a>
                                    <a class="dropdown-item" href="../dom/css.html">DOM et CSS</a>
                                    <a class="dropdown-item" href="../dom/dataset.html">Dataset</a>
                                </div>
                            </li>
                        </ul>
                    </div>
                    <div class="collapse navbar-collapse" id="collapsibleNavId">
                        <ul class="navbar-nav me-auto mt-2 mt-lg-0">
                            <li class="nav-item dropdown">
                                <a class="nav-link dropdown-toggle" href="#" id="dropdownId" data-bs-toggle="dropdown"
                                    aria-haspopup="true" aria-expanded="false">AJAX</a>
                                <div class="dropdown-menu" aria-labelledby="dropdownId">
                                    <a class="dropdown-item" href="../ajax/index.html">Promesses</a>
                                    <a class="dropdown-item" href="../ajax/fetch.html">AJAX avec Fetch</a>
                                </div>
                            </li>
                        </ul>
                    </div>
                </ul>
            </div>
        </div>
    </nav>
    <main class="container">
        <section class="row">
            <div class="col-lg-12">
                <article>
                    <header>
                        <h2 class="titreDeChapitre">Le DOM : Document Object Model</h2>
                    </header>
                    <main>
                        <p>
                            le <b>DOM</b> nous permet de repérer, analyser, modifier et
                            supprimer des éléments de la page HTML
                        </p>
                        <p>
                            Il faut que tous les éléments soient chargés pour qu'il soit
                            possible d'agir sur eux avec JS.
                            On écoute l'évènement de la fenêtre DOMContentLoaded qui survient
                            quand la page est totalement chargée.
                        </p>
                        <div id="ouEstLeCLic">
    
                        </div>
                        
                        <h3 class="titreDeChapitre">Agir sur le DOM</h3>
                        <ul>
                            <li>Connaître l'élément surveillé l'élément du DOM, de la page</li>
                            <li>Connaître l'événement écouté : le déclencheur</li>
                        </ul>
                        <p>
                            <button class="btn btn-secondary" id="checkP">
                                Tester les paragraphes
                            </button>
                        </p>
                        <div id="showP" style="border: 1px solid lightseagreen; border-radius: 5px;">
                            
                        </div>
                        <p id="special">
                            Lorem ipsum dolor sit amet
                            consectetur adipisicing elit.
                            Nihil hic numquam magnam ullam,
                            ea odio illo doloremque molestias
                            accusamus corporis corrupti doloribus
                            ab! Mollitia provident quibusdam libero,
                            fugit a perferendis.
                        </p>
                        <figure>
                            <img src="../images/pip-boy-thumb-down.png" alt="Pip boy sans le bras droit" width="200"
                            id="imgOver" />
                            <figcaption>
                                Pip boy sans le bras droit
                            </figcaption>
                        </figure>
                    </main>
                    
                </article>
            </div>
        </section>
    </main>
</body>

</html>